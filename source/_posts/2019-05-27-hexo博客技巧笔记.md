---
title: hexo博客配置笔记
tags: 博客优化
date: 2019-05-27 17:04:33
categories: 博客
---

主要是记录一些有用的东西, 方便日后查找.建站是hexo+github+next主题.  
## 站点配置

### 站点配置文件  

在Hexo中有两份主要的配置文件，其名称都是\_config.yml. 其中，一份位于站点根目录下，主要包含 Hexo 本身的配置；另一份位于主题目录下，这份配置由主题作者提供，主要用于配置主题相关的选项.  

1. 站点配置  
站点配置主要包含以下几个内容:  
- 站点基本信息:配置自己网站的名字,副标题, 描述, 作者,语言,时区
- URL: 配置自己站点域名等信息
- 站点目录
- 写作: 新文章的命名, 默认类别等
- 主页: 主页显示的文章数目, 排序方式
- 类别和标签设置
- 时间格式设置
- 主题、插件
- 站点部署

2. 主题配置  
[安装next主题](https://theme-next.org/docs/getting-started/)之后, 可通过修改主题配置文件`themes\next\_config.yml`里面的配置来diy自己的博客站点.配置主要包含以下几个内容:  

- 站点信息: 网站浏览器图标、站点页脚、rss订阅、版权信息、github图标
- SEO设置: 一些搜索引擎搜索流量相关的设置
- 菜单设置: 设置管理自己的首页显示的菜单
- 主题选择
- 边栏设置:添加社交联系方式、友方博客链接、头像设置、文章目录、回到文章开头、chat
- 文章设置: 对齐、滚动查看、摘要设置、readmore、文章展示信息、计数、代码块、微信订阅、打赏、相关博客、编辑
- Misc 主题设置
- 字体设置
- 第三方服务设置
- 评论设置
- 内容分享
- 数据统计分析
- 站内搜索
- 聊天
- 标签设置
- 动画效果设置  

### 首页显示内容    

1. 修改博客文章的开头Front-matter中的description字段, 填写相关内容. 如果字段内容非空, 则作为摘要显示在首页.  
2. 通过在文章中插入`<!--more-->`来标记, 标记之前的内容作为摘要显示在首页.  
3. 修改主题配置文件`themes\next\_config.yml`   


```yml themes\next\_config.yml
auto_excerpt:
  enable: true  # 开启自动摘要提取
  length: 150
```


说明: 第3种方式开启可以作为默认的方式, 第1、2种可以为博客定制, 必要的时候可以设置使得自己的博客展现得更加完美.    

### 添加社交链接  

修改主题配置文件`themes\next\_config.yml`, 在`social`里面添加自己的账号并设置图标, 并将`social_icons`里的`enable` 设true.     


```yml themes\next\_config.yml
social:
  GitHub: https://github.com/yourname || github
  E-Mail: mailto:yourname@gmail.com || envelope
social_icons:   
  enable: true  # 显示社交软件图标
```

## 文章撰写   

本块内容主要参考`Yearito`的博客[Hexo 搭建个人博客系列：写作技巧篇](http://yearito.cn/posts/hexo-writing-skills.html)  

### 布局(layout)  

布局可以理解为文档的类别或者格式, 不同的类别对应不同的存储位置, 也有不同的作用.  
Hexo 默认有三种布局:`post`、`page`、`draft`,用户可以在`scaffolds`目录下新建文档来自定义布局的模板, 修改站点配置文件中的`default_layout`来指定`hexo new`生成文档的默认布局.   


| 布局  | 路径           | 作用                                                      |
| ----- | -------------- | --------------------------------------------------------- |
| posts | source/_posts  | 目录下的内容作为博客正文显示在网站中                      |
| page  | source         | 用于生成类似**首页**、**归档**这样的页面                  |
| draft | source/_drafts | 草稿文件, 不在网站中显示, 通过`hexo publish`可以转为posts |


### 博客添加菜单    

菜单(menu)就是那个主页上显示的导航栏上面的按钮, 默认只有`首页(home)`和`归档(archives)`, 这个可以设置添加更多链接. 首先通过修改主题配置文件中的`menu`字段可以添加新的菜单选项, 其次通过新建`page`布局来生成对应的链接.  

#### 修改主题配置文件添加菜单选项    


``` diff themes\next\_config.yml
menu:
  home: / || home
  archives: /archives/ || archive
+ about: /about/ || user
+ tags: /tags/ || tags
+ categories: /categories/ || th
```


其中，`||` 之前的值表示菜单链接，之后的值表示所用的 [FontAwesome](https://fontawesome.com) 图标名称.
完成这一步, 就可以看到主页上面多了对应的菜单选项, 但是点击却跳转到错误界面, **只是开放了页面入口, 没有建立对应链接的页面**. 所以, 下一步就是生成内容界面.     

#### 新建page生成对应网页      


```
$ hexo new page <title>
```


通过上诉命令会在在 `source` 目录下新建一个 `<title>` 文件夹，并在该文件夹下创建一个 `index.md` 文件，编辑该文件即可修改页面内容.  
例如，通过 `hexo new page tags` 命令将会生成如下目录.    


```
.
└──  source             
  ├── _posts          
  └── tags
    └── index.md
```

**注意:** 对`index.md`的修改分两种情况:  

- 情况一: 在文档开头(Front Matter) 指定`type`字段  
  已知`type` 可取 `tages`和`categories`两个值. 这种情况下, 页面会显示便签或者分类的归档, 并且页面不会显示其它内容. 也就是`index.md`正文部分即使写了也不会显示.    
- 情况二: 不指定`type`的自定义页面    
  这种情况下, `index.md`会和其它文章一样显示.  

### Hexo 内置标签插件实现复杂功能  

#### 文本居中标签  

一共有三种方式实现文本居中,如下面代码所示:   


```html 文本居中三种方法

<!-- HTML方式: 直接在 Markdown 文件中编写 HTML 来调用 -->
<!-- 其中 class="blockquote-center" 是必须的 -->
<blockquote class="blockquote-center">blah blah blah</blockquote>

<!-- 标签方式 -->
{% centerquote %}blah blah blah{% endcenterquote %}

<!-- 标签别名 -->
{% cq %} blah blah blah {% endcq %}
```

#### note 颜色块标签

通过 note 标签可以为段落添加背景色，语法如下：

```
{% note [class] %}
文本内容 (支持行内标签)
{% endnote %}
```

支持的class种类包括 `default` `primary` `success` `info` `warning` `danger`，也可以不指定class。  

各种class种类的效果如下：  

{% note primary %}
**primary** note tag
{% endnote %}

{% note success %}
**success** note tag
{% endnote %}

{% note info %}
**info** note tag
{% endnote %}

{% note warning %}
**warning** note tag
{% endnote %}

{% note danger %}
**danger** note tag
{% endnote %}

{% note %}
undefined class note tag
{% endnote %}

更多配置可在主题配置文件中设置, 建议`style`选择`modern`, 默认是`simple`

``` yaml themes\next\_config.yml
note:
  # Note 标签样式预设
  style: modern  # simple | modern | flat | disabled
  icons: false  # 是否显示图标
  border_radius: 3  # 圆角半径
  light_bg_offset: 0  # 默认背景减淡效果，以百分比计算
```

#### label字体背景色标签标签

通过label标签可以为文字添加背景色，语法如下：

```
{% label [class]@text  %}
```

支持的class种类包括 `default` `primary` `success` `info` `warning` `danger`，默认使用 `default` 作为缺省。

使用示例如下：

``` plain
I heard the echo, {% label default@from the valleys and the heart %}
Open to the lonely soul of {% label info@sickle harvesting %}
Repeat outrightly, but also repeat the well-being of
Eventually {% label warning@swaying in the desert oasis %}
{% label success@I believe %} I am
{% label primary@Born as the bright summer flowers %}
Do not withered undefeated fiery demon rule
Heart rate and breathing to bear {% label danger@the load of the cumbersome %}
Bored
```

{% centerquote %}
I heard the echo, {% label default@from the valleys and the heart %}
Open to the lonely soul of {% label info@sickle harvesting %}
Repeat outrightly, but also repeat the well-being of
Eventually {% label warning@swaying in the desert oasis %}
{% label success@I believe %} I am
{% label primary@Born as the bright summer flowers %}
Do not withered undefeated fiery demon rule
Heart rate and breathing to bear {% label danger@the load of the cumbersome %}
Bored
{% endcenterquote %}

可在主题配置文件中设置 `label: false` 来取消label标签默认CSS样式。  

#### button按钮

通过button标签可以快速添加带有主题样式的按钮，语法如下：

```
{% button /path/to/url/, text, icon [class], title %}
```

也可简写为：

```
{% btn /path/to/url/, text, icon [class], title %}
```

其中， 图标ID来源于 [FontAwesome](https://fontawesome.com/v4.7.0/icons/) 。

使用示例如下：

```
{% btn #, 文本 %}
{% btn #, 文本 & 标题,, 标题 %}
{% btn #, 文本 & 图标, home %}
{% btn #, 文本 & 大图标 (固定宽度), home fa-fw fa-lg %}
```

<p>{% btn #, 文本 %}</p>
<p>{% btn #, 文本 & 标题,, 标题 %}</p>
<p>{% btn #, 文本 & 图标, home %}</p>
<p>{% btn #, 文本 & 大图标 (固定宽度), home fa-fw fa-lg %}</p>  

#### tab选项卡标签

tab标签用于快速创建tab选项卡，语法如下

``` html
{% tabs [Unique name], [index] %}
  <!-- tab [Tab caption]@[icon] -->
  标签页内容（支持行内标签）
  <!-- endtab -->
{% endtabs %}
```

其中，各参数意义如下：

- Unique name: 全局唯一的Tab名称，将作为各个标签页的id属性前缀
- index: 当前激活的标签页索引，如果未定义则默认选中显示第一个标签页，如果设为-1则默认隐藏所有标签页
- Tab caption: 当前标签页的标题，如果不指定则会以Unique name加上索引作为标题
- icon: 在标签页标题中添加Font awesome图标

使用示例如下：

``` plain
{% tabs Tab标签列表 %}
  <!-- tab 标签页1 -->
    标签页1文本内容
  <!-- endtab -->
  <!-- tab 标签页2 -->
    标签页2文本内容
  <!-- endtab -->
  <!-- tab 标签页3 -->
    标签页3文本内容
  <!-- endtab -->
{% endtabs %}
```

{% tabs Tab标签列表 %}
  <!-- tab 标签页1 -->
    标签页1文本内容
  <!-- endtab -->
  <!-- tab 标签页2 -->
    标签页2文本内容
  <!-- endtab -->
  <!-- tab 标签页3 -->
    标签页3文本内容
  <!-- endtab -->
{% endtabs %}

#### 突破容器宽度限制的图片  

有的时候需要突出显示图片, 因为图片的扩大与容器的偏差可以从视觉上提升图片的吸引力.主要有两种方式:  
- HTML方式：使用这种方式时，为 img 添加属性 class="full-image"即可。
- 标签方式：使用 fullimage 或者 简写 fi， 并传递图片地址、 alt 和 title 属性即可。 属性之间以逗号分隔。

```html
<!-- HTML方式: 直接在 Markdown 文件中编写 HTML 来调用 -->
<!-- 其中 class="full-image" 是必须的 -->
<img src="/image-url" class="full-image" />

<!-- 标签 方式，要求版本在0.4.5或以上 -->
{% fullimage /image-url, alt, title %}

<!-- 别名 -->
{% fi /image-url, alt, title %}

```


#### 引用站内链接

可以通过如下语法引入站内文章的地址或链接：

```
{% post_path slug %}
{% post_link slug [title] %}
```

其中，`slug` 表示 `_post` 目录下的Markdown文件名。

`post_path` 标签将会渲染为文章的地址，即 `permalink`；而 `post_link` 标签将会渲染为链接，可以通过 `title` 指定链接标题。

如以下标签将会生成 {% post_path 2019-05-27-hexo博客技巧笔记 %}

```
{% post_path 2019-05-27-hexo博客技巧笔记 %}
```

而以下标签则会生成 {% post_link 2019-05-27-hexo博客技巧笔记 链接标题 %}

```
{% post_link 2019-05-27-hexo博客技巧笔记 链接标题 %}
```

这种站内引用方式比直接使用url引用的形式更为可靠，因为即使修改了 `permalink` 格式，或者修改了文章的路由地址，只要Markdown文件名没有发生改变，引用链接都不会失效。

#### 插入Swig代码

如果需要在页面内插入Swig代码，包括原生HTML代码，JavaScript脚本等，可以通过 raw 标签来禁止Markdown引擎渲染标签内的内容。语法如下：

```
{% raw %}
content
{% endraw %}
```

该标签通常用于在页面内引入三方脚本实现特殊功能，尤其是当该三方脚本尚无相关hexo插件支持的时候，可以通过写原生Web页面的形式引入脚本并编写实现逻辑。

#### 插入Gist

如果需要在页面内插入Gist上的代码片段时，可以使用如下标签:

```
{% gist gist_id [filename] %}
```

其中，各参数意义如下：

- gist_id: Gist仓库页面url中最后一段随机字符串
- filename: Gist中的文件名

如果Gist中只有一个文件，可以不用指定filename，也可以通过JavaScript脚本的形式直接引入，如：

```html
<script src="url"></script>
```

如果Gist中有多个文件，可以在标签内输入filename来指定只引入某个文件，如果没有指定filename，将会引入Gist中的所有文件。另外，引用JavaScript脚本形式无法精确控制只引入某一个文件，将会同时引入Gist中的所有文件。

如果指定了与Gist无法匹配的filename，页面上将不会显示任何标签内容。所以，一般在Gist只有一个文件的情况下无需指定filename。

**在页面中引入Gist代码段将会同时从github服务器上下载脚本与CSS样式文件，由于国内访问github服务器延迟较高，往往资源文件连接和下载的速度很慢，会阻塞页面的渲染进程导致短时白屏.**  

### 代码块高阶使用方法  

代码块进阶语法规则：

<div style="background-color: #f7f7f7; margin: 20px 0; padding: 10px;border-radius: 5px; font-family: consolas;">
  &#x60;&#x60;&#x60; [language] [title] [url] [link text]<br>
  code snippet <br>
  &#x60;&#x60;&#x60;
</div>

其中，各参数意义如下：

- langugae：语言名称，引导渲染引擎正确解析并高亮显示关键字
- title：代码块标题，将会显示在左上角
- url：链接地址，如果没有指定link text则会在右上角显示link
- link text：链接名称，指定url后有效，将会显示在右上角

{% note warning %}
注意\`\`\`后面不要有多余的空格!不然可能导致代码块功能失调。
{% endnote %}

url 必须为有效链接地址才会以链接的形式显示在右上角，否则将作为标题显示在左上角。以url为分界，左侧除了第一个单词会被解析为language，其他所有单词都会被解析为title，而右侧的所有单词都会被解析为link text。

**如果不想填写title，可以在language和url之间添加至少三个空格。**  
**tips:** 如果设置语言为 diff，可以在代码前添加 + 和 - 来实现高亮增删行提示效果，在展示代码改动痕迹时比较实用,如下所示:  

```diff _config.yml
 highlight:
   enable: true
   line_number: false
-  auto_detect: false
+  auto_detect: true #开启自动语言检测高亮
```

更多花里胡哨的代码块功能拓展, 可以看这个[HEXO下的语法高亮拓展修改](https://www.ofind.cn/blog/HEXO/HEXO%E4%B8%8B%E7%9A%84%E8%AF%AD%E6%B3%95%E9%AB%98%E4%BA%AE%E6%8B%93%E5%B1%95%E4%BF%AE%E6%94%B9.html#%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%A0%81%E6%B7%BB%E5%8A%A0%E5%88%A0%E9%99%A4%E6%A0%87%E8%AE%B0)。  

#### 插入图片

**TODO**  

- [ ] Hexo-cos-sync 插件开发

使用腾讯云图床COS, 但是发现没有七牛云一样便捷的插件用于上传博客的图片, 拟自己写一个。下面是几个可能用的着的资源:
[一个python写的同步工具](https://github.com/Erimus-Koo/qCloud-COS-Sync)  
[Hexo cos 部署插件](https://github.com/sdlzhd/hexo-deployer-cos)  
[七牛云hexo资源上传插件](https://github.com/gyk001/hexo-qiniu-sync)  
[cos sdk](https://cloud.tencent.com/document/product/436/14113)

### 写在最后  

所有笔记都是来自官方文档和Yearito's Blog, 如果有错误或者想了解更多的内容, 可以参看参考链接。



---  

### 参考链接  
1. [Next document](https://theme-next.org)
2. [Hexo document](https://hexo.io/zh-cn/docs)
3. [Hexo 搭建个人博客系列：基础建站篇-Yearito's Blog ](http://yearito.cn/posts/hexo-get-started.html)  
4. [Hexo 搭建个人博客系列：写作技巧篇-Yearito's Blog](http://yearito.cn/posts/hexo-writing-skills.html)  
5. [Hexo Theme Next Test - 标签的运用](https://almostover.ru/2016-01/hexo-theme-next-test/)
